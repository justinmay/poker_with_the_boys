{"ast":null,"code":"var _jsxFileName = \"/Users/justinmay/Code/poker_with_the_boys/poker/src/components/GameStart.tsx\";\nimport React, { useState } from \"react\";\nimport { useMutation } from '@apollo/react-hooks';\nimport { createGameMutation, joinGameQuery } from '../queries';\nimport '../stylesheets/GameStartOverlay.css';\nimport Settings from '../settings';\nimport { Redirect } from \"react-router-dom\";\nexport default function GameStart(Props) {\n  const [startGameWorkflow, setStartGameWorkflow] = useState(false);\n  const [bigBlind, setBigBlind] = useState(0);\n  const [smallBlind, setSmallBlind] = useState(0);\n  const [gameId, setGameId] = useState(\"\");\n  const [createGame, {\n    loading: createGameLoading,\n    error: createGameError\n  }] = useMutation(createGameMutation);\n  const [joinGame, {\n    loading: joinGameLoading,\n    error: joinGameError\n  }] = useMutation(joinGameQuery);\n  const [startGame, setStartGame] = useState(false);\n\n  function startNewGame() {\n    if (Settings.dev) {\n      setStartGame(true);\n      return;\n    }\n\n    if (startGameWorkflow) {\n      const values = {\n        variables: {\n          BB: bigBlind,\n          SB: smallBlind\n        }\n      };\n      console.log(bigBlind, smallBlind);\n      createGame(values).then(e => {\n        console.log(e.data.createGame);\n        Props.parentGetGameID(e.data.createGame);\n        setStartGame(true);\n      }).catch(e => {\n        console.log(e.toString());\n      });\n    } else {\n      setStartGameWorkflow(true);\n    }\n  }\n\n  function startGameWithID() {\n    if (Settings.dev) {\n      setStartGame(true);\n      return;\n    }\n\n    const values = {\n      variables: {\n        gameId\n      }\n    };\n    joinGame(values).then(e => {\n      console.log(e);\n\n      if (e.data.joinGame) {\n        Props.parentGetGameID(gameId);\n        setStartGame(true);\n      } else {\n        console.log(\"wrong gameid\"); //TODO PUT IN USER RESPONSE\n      }\n    }).catch(error => {\n      console.log(\"join game error\");\n      console.log(error);\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    startGameWithID();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, startGame && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: '/poker'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginContent lessOpacity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, createGameLoading ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"loginInvalidUsername\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 38\n    }\n  }, \" Hang Tight, Creating Game...\") : null, joinGameLoading ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"loginInvalidUsername\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 36\n    }\n  }, \" Hang Tight, Joining Game...\") : null, createGameError ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"loginInvalidUsername\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 36\n    }\n  }, \" \", createGameError.toString() === \"Error: Network error: Failed to fetch\" ? \"Can't connect to server\" : \"Can't create game\", \" \") : null, joinGameError ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"loginInvalidUsername\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 34\n    }\n  }, \" \", joinGameError.toString() === \"Error: Network error: Failed to fetch\" ? \"Can't connect to server\" : \"Wrong Game ID\", \" \") : null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"loginButton overlayButton\",\n    onClick: () => startNewGame(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, \"New Game\"), startGameWorkflow ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: event => {\n      event.preventDefault();\n      startNewGame();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"loginInput overlayInput\",\n    type: \"text\",\n    name: \"name\",\n    autoComplete: \"off\",\n    value: bigBlind,\n    placeholder: \"big blind size\",\n    onChange: event => setBigBlind(parseInt(event.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: event => {\n      event.preventDefault();\n      startNewGame();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"loginInput overlayInput\",\n    type: \"text\",\n    name: \"name\",\n    autoComplete: \"off\",\n    value: smallBlind,\n    placeholder: \"small blind size\",\n    onChange: event => setSmallBlind(parseInt(event.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"loginButton overlayButton\",\n    onClick: () => startGameWithID(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, \"Join Game\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: event => handleSubmit(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"loginInput overlayInput\",\n    type: \"text\",\n    name: \"name\",\n    autoComplete: \"off\",\n    value: gameId,\n    placeholder: \"game id\",\n    onChange: event => setGameId(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/justinmay/Code/poker_with_the_boys/poker/src/components/GameStart.tsx"],"names":["React","useState","useMutation","createGameMutation","joinGameQuery","Settings","Redirect","GameStart","Props","startGameWorkflow","setStartGameWorkflow","bigBlind","setBigBlind","smallBlind","setSmallBlind","gameId","setGameId","createGame","loading","createGameLoading","error","createGameError","joinGame","joinGameLoading","joinGameError","startGame","setStartGame","startNewGame","dev","values","variables","BB","SB","console","log","then","e","data","parentGetGameID","catch","toString","startGameWithID","handleSubmit","preventDefault","pathname","event","parseInt","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAA4BC,QAA5B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA2B,qBAA3B;AACA,SAAQC,kBAAR,EAA4BC,aAA5B,QAAgD,YAAhD;AACA,OAAO,qCAAP;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AAKA,eAAe,SAASC,SAAT,CAAmBC,KAAnB,EAA0C;AACrD,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4CT,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACc,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACgB,UAAD,EAAa;AAAEC,IAAAA,OAAO,EAAEC,iBAAX;AAA8BC,IAAAA,KAAK,EAAEC;AAArC,GAAb,IAAuEnB,WAAW,CAACC,kBAAD,CAAxF;AACA,QAAM,CAACmB,QAAD,EAAW;AAAEJ,IAAAA,OAAO,EAAEK,eAAX;AAA4BH,IAAAA,KAAK,EAAEI;AAAnC,GAAX,IAAiEtB,WAAW,CAACE,aAAD,CAAlF;AACA,QAAM,CAACqB,SAAD,EAAYC,YAAZ,IAA4BzB,QAAQ,CAAC,KAAD,CAA1C;;AAEA,WAAS0B,YAAT,GAAwB;AACpB,QAAItB,QAAQ,CAACuB,GAAb,EAAkB;AACdF,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACH;;AACD,QAAIjB,iBAAJ,EAAuB;AACnB,YAAMoB,MAAM,GAAG;AAAEC,QAAAA,SAAS,EAAE;AAAEC,UAAAA,EAAE,EAAEpB,QAAN;AAAgBqB,UAAAA,EAAE,EAAEnB;AAApB;AAAb,OAAf;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAYvB,QAAZ,EAAqBE,UAArB;AACAI,MAAAA,UAAU,CAACY,MAAD,CAAV,CAAmBM,IAAnB,CAAwBC,CAAC,IAAI;AACzBH,QAAAA,OAAO,CAACC,GAAR,CAAYE,CAAC,CAACC,IAAF,CAAOpB,UAAnB;AACAT,QAAAA,KAAK,CAAC8B,eAAN,CAAsBF,CAAC,CAACC,IAAF,CAAOpB,UAA7B;AACAS,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,OAJD,EAIGa,KAJH,CAISH,CAAC,IAAI;AACVH,QAAAA,OAAO,CAACC,GAAR,CAAYE,CAAC,CAACI,QAAF,EAAZ;AACH,OAND;AAOH,KAVD,MAUO;AACH9B,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH;AACJ;;AAED,WAAS+B,eAAT,GAA2B;AACvB,QAAIpC,QAAQ,CAACuB,GAAb,EAAkB;AACdF,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACH;;AACD,UAAMG,MAAM,GAAG;AAAEC,MAAAA,SAAS,EAAE;AAAEf,QAAAA;AAAF;AAAb,KAAf;AACAO,IAAAA,QAAQ,CAACO,MAAD,CAAR,CAAiBM,IAAjB,CAAsBC,CAAC,IAAI;AACvBH,MAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;;AACA,UAAGA,CAAC,CAACC,IAAF,CAAOf,QAAV,EAAoB;AAChBd,QAAAA,KAAK,CAAC8B,eAAN,CAAsBvB,MAAtB;AACAW,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,OAHD,MAGO;AACHO,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADG,CACyB;AAC/B;AACJ,KARD,EAQGK,KARH,CAQSnB,KAAK,IAAI;AACda,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACH,KAXD;AAaH;;AAED,WAASsB,YAAT,CAAsBN,CAAtB,EAA8B;AAC1BA,IAAAA,CAAC,CAACO,cAAF;AACAF,IAAAA,eAAe;AAClB;;AAED,sBACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQhB,SAAS,iBAAI,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE;AAACmB,MAAAA,QAAQ,EAAE;AAAX,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFrB,eAII;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKzB,iBAAiB,gBAAG;AAAI,IAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAH,GAA4E,IADlG,EAEKI,eAAe,gBAAG;AAAI,IAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAAH,GAA2E,IAF/F,EAGKF,eAAe,gBAAG;AAAI,IAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAuCA,eAAe,CAACmB,QAAhB,OAA+B,uCAA/B,GAAyE,yBAAzE,GAAqG,mBAA5I,MAAH,GAA4K,IAHhM,EAIKhB,aAAa,gBAAG;AAAI,IAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAuCA,aAAa,CAACgB,QAAd,OAA6B,uCAA7B,GAAuE,yBAAvE,GAAmG,eAA1I,MAAH,GAAsK,IAJxL,eAKI;AAAQ,IAAA,SAAS,EAAC,2BAAlB;AAA8C,IAAA,OAAO,EAAE,MAAMb,YAAY,EAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,EAUQlB,iBAAiB,gBACjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAM,IAAA,QAAQ,EAAEoC,KAAK,IAAI;AAACA,MAAAA,KAAK,CAACF,cAAN;AAAuBhB,MAAAA,YAAY;AAAI,KAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACA,IAAA,SAAS,EAAC,yBADV;AAEA,IAAA,IAAI,EAAC,MAFL;AAGA,IAAA,IAAI,EAAC,MAHL;AAIA,IAAA,YAAY,EAAE,KAJd;AAKA,IAAA,KAAK,EAAEhB,QALP;AAMA,IAAA,WAAW,EAAE,gBANb;AAOA,IAAA,QAAQ,EAAGkC,KAAD,IAA0CjC,WAAW,CAACkC,QAAQ,CAACD,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAT,CAP/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFJ,eAYI;AAAM,IAAA,QAAQ,EAAEH,KAAK,IAAI;AAACA,MAAAA,KAAK,CAACF,cAAN;AAAuBhB,MAAAA,YAAY;AAAI,KAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACA,IAAA,SAAS,EAAC,yBADV;AAEA,IAAA,IAAI,EAAC,MAFL;AAGA,IAAA,IAAI,EAAC,MAHL;AAIA,IAAA,YAAY,EAAE,KAJd;AAKA,IAAA,KAAK,EAAEd,UALP;AAMA,IAAA,WAAW,EAAE,kBANb;AAOA,IAAA,QAAQ,EAAGgC,KAAD,IAA0C/B,aAAa,CAACgC,QAAQ,CAACD,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAT,CAPjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAZJ,CADiB,gBAwBjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,SAAS,EAAC,2BAAlB;AAA8C,IAAA,OAAO,EAAE,MAAMP,eAAe,EAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,eAII;AAAM,IAAA,QAAQ,EAAEI,KAAK,IAAIH,YAAY,CAACG,KAAD,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACA,IAAA,SAAS,EAAC,yBADV;AAEA,IAAA,IAAI,EAAC,MAFL;AAGA,IAAA,IAAI,EAAC,MAHL;AAIA,IAAA,YAAY,EAAE,KAJd;AAKA,IAAA,KAAK,EAAE9B,MALP;AAMA,IAAA,WAAW,EAAE,SANb;AAOA,IAAA,QAAQ,EAAG8B,KAAD,IAA0C7B,SAAS,CAAC6B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAP7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,CAlCR,CAJJ,CADJ;AA4DH","sourcesContent":["import React, {ChangeEvent, useState} from \"react\";\nimport { useMutation} from '@apollo/react-hooks';\nimport {createGameMutation, joinGameQuery} from '../queries';\nimport '../stylesheets/GameStartOverlay.css';\nimport Settings from '../settings';\nimport {Redirect} from \"react-router-dom\";\n\ntype GameStartProps = {\n};\n\nexport default function GameStart(Props: GameStartProps) {\n    const [startGameWorkflow, setStartGameWorkflow] = useState(false);\n    const [bigBlind, setBigBlind] = useState(0);\n    const [smallBlind, setSmallBlind] = useState(0);\n    const [gameId, setGameId] = useState(\"\");\n    const [createGame, { loading: createGameLoading, error: createGameError }] = useMutation(createGameMutation);\n    const [joinGame, { loading: joinGameLoading, error: joinGameError }] = useMutation(joinGameQuery);\n    const [startGame, setStartGame] = useState(false);\n\n    function startNewGame() {\n        if (Settings.dev) {\n            setStartGame(true);\n            return;\n        }\n        if (startGameWorkflow) {\n            const values = { variables: { BB: bigBlind, SB: smallBlind} };\n            console.log(bigBlind,smallBlind);\n            createGame(values).then(e => {\n                console.log(e.data.createGame);\n                Props.parentGetGameID(e.data.createGame);\n                setStartGame(true);\n            }).catch(e => {\n                console.log(e.toString());\n            });\n        } else {\n            setStartGameWorkflow(true);\n        }\n    }\n\n    function startGameWithID() {\n        if (Settings.dev) {\n            setStartGame(true);\n            return;\n        }\n        const values = { variables: { gameId} };\n        joinGame(values).then(e => {\n            console.log(e);\n            if(e.data.joinGame) {\n                Props.parentGetGameID(gameId);\n                setStartGame(true);\n            } else {\n                console.log(\"wrong gameid\") //TODO PUT IN USER RESPONSE\n            }\n        }).catch(error => {\n            console.log(\"join game error\");\n            console.log(error);\n        })\n        \n    }\n\n    function handleSubmit(e: any) {\n        e.preventDefault();\n        startGameWithID();\n    }\n    \n    return (\n        <div className=\"overlay\">\n            {\n                startGame && <Redirect to={{pathname: '/poker'}}/> \n            }\n            <div className=\"loginContent lessOpacity\">\n                {createGameLoading ? <h2 className=\"loginInvalidUsername\"> Hang Tight, Creating Game...</h2>: null}\n                {joinGameLoading ? <h2 className=\"loginInvalidUsername\"> Hang Tight, Joining Game...</h2>: null}\n                {createGameError ? <h2 className=\"loginInvalidUsername\"> {createGameError.toString() === \"Error: Network error: Failed to fetch\" ? \"Can't connect to server\" : \"Can't create game\"} </h2> : null}\n                {joinGameError ? <h2 className=\"loginInvalidUsername\"> {joinGameError.toString() === \"Error: Network error: Failed to fetch\" ? \"Can't connect to server\" : \"Wrong Game ID\"} </h2> : null}\n                <button className=\"loginButton overlayButton\" onClick={() => startNewGame()}>\n                    New Game\n                </button>\n                \n                {\n                    startGameWorkflow ? \n                    <div>\n                        \n                        <form onSubmit={event => {event.preventDefault();startNewGame();}}>\n                            <input \n                            className=\"loginInput overlayInput\"\n                            type=\"text\" \n                            name=\"name\" \n                            autoComplete={\"off\"}\n                            value={bigBlind} \n                            placeholder={\"big blind size\"}\n                            onChange={(event: ChangeEvent<HTMLInputElement>) => setBigBlind(parseInt(event.target.value))}/>\n                        </form>\n                        <form onSubmit={event => {event.preventDefault();startNewGame();}}>\n                            <input \n                            className=\"loginInput overlayInput\"\n                            type=\"text\" \n                            name=\"name\" \n                            autoComplete={\"off\"}\n                            value={smallBlind} \n                            placeholder={\"small blind size\"}\n                            onChange={(event: ChangeEvent<HTMLInputElement>) => setSmallBlind(parseInt(event.target.value))}/>\n                        </form>\n                    </div> :\n                    <div>\n                        <button className=\"loginButton overlayButton\" onClick={() => startGameWithID()}>\n                        Join Game\n                        </button>\n                        <form onSubmit={event => handleSubmit(event)}>\n                            <input \n                            className=\"loginInput overlayInput\"\n                            type=\"text\" \n                            name=\"name\" \n                            autoComplete={\"off\"}\n                            value={gameId} \n                            placeholder={\"game id\"}\n                            onChange={(event: ChangeEvent<HTMLInputElement>) => setGameId(event.target.value)}/>\n                        </form>\n                    </div>\n                }\n                \n                \n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}