{"ast":null,"code":"var _jsxFileName = \"/Users/justinmay/Code/poker_with_the_boys/poker/src/components/Action.tsx\";\nimport React, { useState } from \"react\";\nimport '../stylesheets/Action.css';\nimport { useMutation } from '@apollo/react-hooks';\nimport { betMutation, foldMutaiton, allInMutation } from '../queries';\n\n/**\n * This funciton returns the action bar: TODO move the bet component to it's own component so it doesn't refresh the whole bar \n * @param Props props for Action bar\n */\nexport function Action(props) {\n  const [betAmount, setBetAmount] = useState(\"0\");\n  const [bet, {\n    loading: betLoading,\n    error: betError\n  }] = useMutation(betMutation);\n  const [fold] = useMutation(foldMutaiton);\n  const [allIn] = useMutation(allInMutation);\n\n  function handleChange(event) {\n    let bet = event.target.value;\n\n    if (bet.match(/^-{0,1}\\d+$/)) {\n      setBetAmount(bet);\n    } else if (bet === \"\") {\n      setBetAmount(bet);\n    }\n  }\n\n  function handleSizePress(modifier) {\n    if (modifier > 0) {\n      setBetAmount((props.pot * modifier).toString());\n    } else if (props.me) {\n      setBetAmount(props.me.stack.toString());\n    }\n  }\n\n  function betThisAmount() {\n    if (!props.canBet) return;\n\n    if (+betAmount === props.me.stack) {\n      //if all in\n      handleAllIn();\n    } else {\n      const values = {\n        variables: {\n          gameId: props.gameId,\n          amount: +betAmount\n        }\n      };\n      bet(values).then().catch(e => {\n        console.log(e);\n      });\n    }\n  }\n\n  function check() {\n    if (props.canBet) {\n      console.log(\"check\");\n      const values = {\n        variables: {\n          gameId: props.gameId,\n          amount: 0\n        }\n      };\n      bet(values);\n    }\n  }\n\n  function call() {\n    if (props.canBet) {\n      console.log(\"call\");\n      const amount = props.me.betAmount < 0 ? props.currBet : props.currBet - props.me.betAmount;\n      const values = {\n        variables: {\n          gameId: props.gameId,\n          amount: amount\n        }\n      };\n      bet(values);\n    }\n  }\n\n  function handefold() {\n    if (props.canBet) {\n      console.log(\"fold\");\n      const values = {\n        variables: {\n          gameId: props.gameId\n        }\n      };\n      fold(values);\n    }\n  }\n\n  function handleAllIn() {\n    if (props.canBet) {\n      console.log(\"allin\");\n      const values = {\n        variables: {\n          gameId: props.gameId\n        }\n      };\n      allIn(values);\n    }\n  }\n\n  if (!props.canBet) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"actionRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton greenBack\",\n    onClick: () => check(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Check\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton blueBack\",\n    onClick: () => call(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, \"Call\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton redBack\",\n    onClick: () => {\n      handefold();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \"Fold\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton yellowBack\",\n    onClick: () => betThisAmount(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \"Bet\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"betContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"betActionButtonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton yellowBack betActionButton\",\n    onClick: () => handleSizePress(.5),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, \"1/2\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton yellowBack betActionButton\",\n    onClick: () => handleSizePress(.75),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"3/4\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton yellowBack betActionButton\",\n    onClick: () => handleSizePress(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, \"Pot\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"actionButton yellowBack betActionButton\",\n    onClick: () => handleSizePress(-1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"Rip It\"))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"actionButton long actionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input yellowBack\",\n    type: \"text\",\n    name: \"name\",\n    value: betAmount,\n    onChange: event => handleChange(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }))));\n}\nexport default Action;","map":{"version":3,"sources":["/Users/justinmay/Code/poker_with_the_boys/poker/src/components/Action.tsx"],"names":["React","useState","useMutation","betMutation","foldMutaiton","allInMutation","Action","props","betAmount","setBetAmount","bet","loading","betLoading","error","betError","fold","allIn","handleChange","event","target","value","match","handleSizePress","modifier","pot","toString","me","stack","betThisAmount","canBet","handleAllIn","values","variables","gameId","amount","then","catch","e","console","log","check","call","currBet","handefold"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, useState } from \"react\";\nimport '../stylesheets/Action.css';\nimport {useMutation} from '@apollo/react-hooks';\nimport {betMutation, foldMutaiton, allInMutation} from '../queries';\nimport {SubscriptionPlayer} from '../interfaces';\n\ntype ActionProps = {\n    gameId: string,\n    pot: number,\n    me: SubscriptionPlayer,\n    currBet: number,\n    canBet: boolean\n};\n\n/**\n * This funciton returns the action bar: TODO move the bet component to it's own component so it doesn't refresh the whole bar \n * @param Props props for Action bar\n */\nexport function Action(props: ActionProps) {\n    const [betAmount, setBetAmount] = useState(\"0\");\n    const [bet, {loading: betLoading, error: betError}] = useMutation(betMutation);\n    const [fold] = useMutation(foldMutaiton);\n    const [allIn] = useMutation(allInMutation);\n\n    function handleChange(event: ChangeEvent<HTMLInputElement>) {\n        let bet = event.target.value;\n        if (bet.match(/^-{0,1}\\d+$/)) {\n            setBetAmount(bet);\n        } else if (bet === \"\") {\n            setBetAmount(bet);\n        }\n        \n    }\n\n    function handleSizePress(modifier: number) {\n        if (modifier > 0) {\n            setBetAmount((props.pot * modifier).toString());\n        } else if (props.me) {\n            setBetAmount(props.me.stack.toString());\n        }\n        \n    }\n    \n    function betThisAmount() {\n        if (!props.canBet) return;\n        if (+betAmount === props.me.stack) {\n            //if all in\n            handleAllIn();\n        } else {\n            const values = { variables: { gameId: props.gameId, amount: +betAmount} }\n            bet(values)\n            .then()\n            .catch(e => {\n                console.log(e);\n            });\n        }\n    }\n\n    function check() {\n        if (props.canBet){\n            console.log(\"check\")\n            const values = { variables: { gameId: props.gameId, amount: 0} }\n            bet(values);\n        }\n        \n    }\n\n    function call() {\n        if(props.canBet) {\n            console.log(\"call\")\n            const amount = props.me.betAmount < 0 ? props.currBet : props.currBet - props.me.betAmount;\n            const values = { variables: { gameId: props.gameId, amount: amount} };\n            bet(values);\n        }\n    }\n\n    function handefold() {\n        if (props.canBet) {\n            console.log(\"fold\")\n            const values = { variables: { gameId: props.gameId} }\n            fold(values);\n        }\n    }\n\n    function  handleAllIn() {\n        if (props.canBet) {\n            console.log(\"allin\")\n            const values = { variables: { gameId: props.gameId} }\n            allIn(values);\n        } \n    }\n\n    if (!props.canBet) {\n        return (<div></div>)\n    }\n\n    return (\n        <div className=\"actionRow\">\n            <button className=\"actionButton greenBack\" onClick={() => check()}>\n                <p>\n                    Check\n                </p>\n            </button>\n            <button className=\"actionButton blueBack\" onClick={() => call()}>\n                <p>\n                    Call\n                </p>\n            </button>\n            <button className=\"actionButton redBack\" onClick={() => {handefold()}}>\n                <p>\n                    Fold\n                </p>\n            </button>\n            <button className=\"actionButton yellowBack\" onClick={() => betThisAmount()}>\n                <p>\n                    Bet\n                </p>\n            </button>\n            <div className=\"betContainer\">\n                <div className=\"betActionButtonContainer\">\n                    <button className=\"actionButton yellowBack betActionButton\" onClick={() => handleSizePress(.5)}>\n                        <p>\n                            1/2\n                        </p>\n                    </button>\n                    <button className=\"actionButton yellowBack betActionButton\" onClick={() => handleSizePress(.75)}>\n                        <p>\n                            3/4\n                        </p>\n                    </button>\n                    <button className=\"actionButton yellowBack betActionButton\" onClick={() => handleSizePress(1)}>\n                        <p>\n                            Pot\n                        </p>\n                    </button>\n                    <button className=\"actionButton yellowBack betActionButton\" onClick={() => handleSizePress(-1)}>\n                        <p>\n                            Rip It\n                        </p>\n                    </button>\n                </div>\n                <form className=\"actionButton long actionText\">\n                        <input \n                        className=\"input yellowBack\"\n                        type=\"text\" \n                        name=\"name\" \n                        value={betAmount} \n                        onChange={(event: ChangeEvent<HTMLInputElement>) => handleChange(event)}/>\n                </form>\n            </div>\n            \n        </div>\n    )\n}\n\nexport default Action"]},"metadata":{},"sourceType":"module"}